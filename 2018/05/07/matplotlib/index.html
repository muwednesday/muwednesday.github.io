<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python s">
<meta name="keywords" content="Matplotlib">
<meta property="og:type" content="article">
<meta property="og:title" content="How to use matplotlib">
<meta property="og:url" content="https://muwednesday.github.io/2018/05/07/matplotlib/index.html">
<meta property="og:site_name" content="Muwednesday&#39;s Note">
<meta property="og:description" content="Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python s">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://matplotlib.org/_images/anatomy.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/simple.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/plot.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/bar.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/four.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/three.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/two_scales.png">
<meta property="og:image" content="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/latex.png">
<meta property="og:updated_time" content="2019-10-11T13:28:49.252Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to use matplotlib">
<meta name="twitter:description" content="Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python s">
<meta name="twitter:image" content="https://matplotlib.org/_images/anatomy.png">





  
  
  <link rel="canonical" href="https://muwednesday.github.io/2018/05/07/matplotlib/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>How to use matplotlib | Muwednesday's Note</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Muwednesday's Note</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/muwednesday" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://muwednesday.github.io/2018/05/07/matplotlib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Muwednesday">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Muwednesday's Note">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">How to use matplotlib

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-07 14:27:06" itemprop="dateCreated datePublished" datetime="2018-05-07T14:27:06+08:00">2018-05-07</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-10-11 21:28:49" itemprop="dateModified" datetime="2019-10-11T21:28:49+08:00">2019-10-11</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
                 Views:  
                <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
            </span>
          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote><p>Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python scripts, the Python and IPython shells, the Jupyter notebook, web application servers, and four graphical user interface toolkits.</p>
<footer><strong>Matplotlib</strong><cite><a href="https://matplotlib.org/" target="_blank" rel="noopener">Matplotlib 2.2.2 documentation</a></cite></footer></blockquote>

<h2 id="Matplotlib介绍"><a href="#Matplotlib介绍" class="headerlink" title="Matplotlib介绍"></a>Matplotlib介绍</h2><p>Matplotlib 是 python 的绘图库。一副完整的图形(figure)包括标题(title)、坐标轴标题(X&amp;Y axis label)、边框线(spines)、主要刻度线(major tick)、主要刻度线标题(major tick label)、次要刻度线(minor tick)、次要刻度线标题(minor tick label)、图例(legend)、网格线(grid)、线(line)以及标记(marker)等，如下图所示。</p>
<p><img src="https://matplotlib.org/_images/anatomy.png" alt></p>
<a id="more"></a>

<h2 id="简单例子"><a href="#简单例子" class="headerlink" title="简单例子"></a>简单例子</h2><p>一个简单的例子，使用 pandas 从 Excel 中读取数据，画折线图。值得注意的是，安装完 pandas 需要 <code>pip install xlrd</code>，否则会报错：ImportError: No module named ‘xlrd’。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Import data</span></span><br><span class="line">excel_path = <span class="string">'data.xlsx'</span></span><br><span class="line">data = pd.read_excel(excel_path, sheet_name=<span class="string">'Sheet1'</span>)</span><br><span class="line"><span class="comment"># data.x是pandas.Series对象，可用tolist()方法转化为list</span></span><br><span class="line">x = data.x.tolist()</span><br><span class="line">y = data.y.tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/simple.png">

<h2 id="复杂例子"><a href="#复杂例子" class="headerlink" title="复杂例子"></a>复杂例子</h2><h3 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h3><p>上个例子比较简单，matplotlib 提供了许多 API 来自定义 figure 的各种设置。</p>
<p>调整边框线的粗细需要同时调整图例和刻度线，即：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">width = <span class="number">1</span></span><br><span class="line">rcParams[<span class="string">'axes.linewidth'</span>] = width</span><br><span class="line">legend.get_frame().set_linewidth(width)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_tick_params(width=width)</span><br><span class="line">ax.yaxis.set_tick_params(width=width)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> util <span class="keyword">import</span> cm2inch</span><br><span class="line"></span><br><span class="line">width = <span class="number">0.5</span></span><br><span class="line">fontsize = <span class="number">10.5</span></span><br><span class="line"></span><br><span class="line">rcParams[<span class="string">'axes.linewidth'</span>] = width</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import data</span></span><br><span class="line">excel_path = <span class="string">'C:data.xlsx'</span></span><br><span class="line">data = pd.read_excel(excel_path, sheet_name=<span class="string">'Sheet1'</span>)</span><br><span class="line">a = data.a.tolist()</span><br><span class="line">y = data.y.tolist()</span><br><span class="line">z = data.z.tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line"><span class="comment"># Colors from seaborn-paper</span></span><br><span class="line">colors = [<span class="string">'#4878CF'</span>, <span class="string">'#6ACC65'</span>, <span class="string">'#D65F5F'</span>, <span class="string">'#B47CC7'</span>, <span class="string">'#C4AD66'</span>, <span class="string">'#77BEDB'</span>]</span><br><span class="line"><span class="comment"># 设置图片大小(cm)</span></span><br><span class="line">fig, ax = plt.subplots(figsize=cm2inch((<span class="number">12</span>, <span class="number">7.5</span>)))</span><br><span class="line"></span><br><span class="line">plt.plot(a, y, marker=<span class="string">'o'</span>, c=colors[<span class="number">0</span>], linewidth=<span class="number">1</span>, markersize=<span class="number">4</span>, label=<span class="string">'first'</span>)</span><br><span class="line">plt.plot(a, z, marker=<span class="string">'^'</span>, c=colors[<span class="number">1</span>], linewidth=<span class="number">1</span>, markersize=<span class="number">4</span>, label=<span class="string">'second'</span>)</span><br><span class="line"></span><br><span class="line">plt.title(<span class="string">'title'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'hello world'</span>, fontsize=fontsize)</span><br><span class="line">plt.ylabel(<span class="string">'hello world'</span>, fontsize=fontsize)</span><br><span class="line"><span class="comment"># 刻度线标记</span></span><br><span class="line">plt.xlim(<span class="number">1</span>, <span class="number">12</span>)</span><br><span class="line">plt.xticks(np.arange(<span class="number">1</span>, <span class="number">13</span>, <span class="number">1</span>))</span><br><span class="line">plt.ylim((<span class="number">80</span>, <span class="number">220</span>))</span><br><span class="line">plt.yticks(np.arange(<span class="number">80</span>, <span class="number">221</span>, <span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">legend = plt.legend(loc=<span class="string">'best'</span>, edgecolor=<span class="string">'inherit'</span>, fontsize=fontsize)</span><br><span class="line">legend.get_frame().set_linewidth(width)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the font size for axis tick labels</span></span><br><span class="line"><span class="keyword">for</span> tick <span class="keyword">in</span> ax.get_xticklabels():</span><br><span class="line">    tick.set_fontsize(fontsize)</span><br><span class="line"><span class="keyword">for</span> tick <span class="keyword">in</span> ax.get_yticklabels():</span><br><span class="line">    tick.set_fontsize(fontsize)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_tick_params(width=width)</span><br><span class="line">ax.yaxis.set_tick_params(width=width)</span><br><span class="line"><span class="comment"># 内侧刻度线</span></span><br><span class="line">plt.tick_params(direction=<span class="string">'in'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整整体空白</span></span><br><span class="line">fig.tight_layout()</span><br><span class="line"><span class="comment"># 保存图片</span></span><br><span class="line">plt.savefig(<span class="string">'fig.png'</span>, dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/plot.png">

<h3 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3><p>柱状图相对复杂些，需要设置每个柱体的宽度。</p>
<p>另外，可以设置每个主要刻度线的标记(tick)。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import data</span></span><br><span class="line">excel_path = <span class="string">'C:data.xlsx'</span></span><br><span class="line">data = pd.read_excel(excel_path, sheet_name=<span class="string">'Sheet1'</span>)</span><br><span class="line"><span class="comment"># 支持+ -运算</span></span><br><span class="line">a = np.arange(<span class="number">1</span>, len(data.a) + <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ticks= [<span class="string">'Jan'</span>, <span class="string">'Feb'</span>, <span class="string">'Mar'</span>, <span class="string">'Apr'</span>, <span class="string">'May'</span>, <span class="string">'Jun'</span>, <span class="string">'Jul'</span>, <span class="string">'Aug'</span>, <span class="string">'Sep'</span>, <span class="string">'Oct'</span>, <span class="string">'Nov'</span>, <span class="string">'Dec'</span>]</span><br><span class="line">b = data.b.tolist()</span><br><span class="line">c = data.c.tolist()</span><br><span class="line">d = data.d.tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line"><span class="comment"># Colors from seaborn-paper</span></span><br><span class="line">colors = [<span class="string">'#4878CF'</span>, <span class="string">'#6ACC65'</span>, <span class="string">'#D65F5F'</span>, <span class="string">'#B47CC7'</span>, <span class="string">'#C4AD66'</span>, <span class="string">'#77BEDB'</span>]</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">total_width, n = <span class="number">0.9</span>, <span class="number">3</span></span><br><span class="line">width = total_width / n</span><br><span class="line">a = a - (total_width - width) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">plt.bar(a, b,  width=width, color=colors[<span class="number">0</span>], label=<span class="string">'first'</span>)</span><br><span class="line">plt.bar(a + width, c, width=width, color=colors[<span class="number">1</span>], label=<span class="string">'second'</span>)</span><br><span class="line">plt.bar(a + <span class="number">2</span> * width, d, width=width, color=colors[<span class="number">2</span>], label=<span class="string">'third'</span>)</span><br><span class="line">plt.xticks(a + width, ticks)</span><br><span class="line"></span><br><span class="line">legend = plt.legend(loc=<span class="string">'best'</span>, edgecolor=<span class="string">'inherit'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整整体空白</span></span><br><span class="line">fig.tight_layout()</span><br><span class="line"><span class="comment"># 保存图片</span></span><br><span class="line">plt.savefig(<span class="string">'bar.png'</span>, dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/bar.png">

<h2 id="subplot"><a href="#subplot" class="headerlink" title="subplot"></a>subplot</h2><p>使用 matplotlib 可以很方便的绘制子图。<code>abc</code> 代表 a 行 b 列第 c 个图，顺序从左到右，从上往下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a为横坐标值，b、c、d、e为纵坐标值</span></span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.plot(a, b)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.plot(a, c)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.plot(a, d)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">224</span>)</span><br><span class="line">plt.plot(a, e)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/four.png">

<p>当第一行有两个子图，第二行只有一个的时候，需要使用 <a href="https://matplotlib.org/users/gridspec.html" target="_blank" rel="noopener">GridSpec</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">gs = gridspec.GridSpec(<span class="number">2</span>, <span class="number">4</span>)</span><br><span class="line">gs.update(wspace=<span class="number">0.5</span>)</span><br><span class="line">ax1 = plt.subplot(gs[<span class="number">0</span>, :<span class="number">2</span>], )</span><br><span class="line">ax1.plot(a, b)</span><br><span class="line"></span><br><span class="line">ax2 = plt.subplot(gs[<span class="number">0</span>, <span class="number">2</span>:])</span><br><span class="line">ax2.plot(a, c)</span><br><span class="line"></span><br><span class="line">ax3 = plt.subplot(gs[<span class="number">1</span>, <span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">ax3.plot(a, d)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/three.png">


<h2 id="双坐标轴"><a href="#双坐标轴" class="headerlink" title="双坐标轴"></a>双坐标轴</h2><p>使用 twinx() 方法，共享横坐标轴。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">fig, ax1 = plt.subplots()</span><br><span class="line">lns1 = ax1.plot(a, b, <span class="string">'b-'</span>, label=<span class="string">'label1'</span>)</span><br><span class="line">ax1.set_xlabel(<span class="string">'xlabel'</span>)</span><br><span class="line"><span class="comment"># Make the y-axis label, ticks and tick labels match the line color.</span></span><br><span class="line">ax1.set_ylabel(<span class="string">'ylabel1'</span>, color=<span class="string">'b'</span>)</span><br><span class="line">ax1.tick_params(<span class="string">'y'</span>, colors=<span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line">ax2 = ax1.twinx()</span><br><span class="line">lns2 = ax2.plot(a, z, <span class="string">'r:'</span>, label=<span class="string">'label2'</span>)</span><br><span class="line">ax2.set_ylabel(<span class="string">'ylabel2'</span>, color=<span class="string">'r'</span>)</span><br><span class="line">ax2.tick_params(<span class="string">'y'</span>, colors=<span class="string">'r'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># added these three lines</span></span><br><span class="line">lns = lns1+lns2</span><br><span class="line">labs = [l.get_label() <span class="keyword">for</span> l <span class="keyword">in</span> lns]</span><br><span class="line">legend = ax1.legend(lns, labs, loc=<span class="number">2</span>, edgecolor=<span class="string">'inherit'</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/two_scales.png">

<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>默认情况下，matplotlib 不支持中文，解决办法参考知乎的<a href="https://www.zhihu.com/question/25404709" target="_blank" rel="noopener">讨论</a>。但对一些强迫症来说，中文要是宋体或黑体，英文必须是 Times New Roman。一种完美的解决方案是使用 LaTeX 渲染，不过图片生成的时间比较长。</p>
<p>使用 LaTeX  渲染，需要安装 LaTeX 和 Ghostscript，否则一直会报错：FileNotFoundError: [WinError 2] 系统找不到指定的文件。参见官网的使用指南 <a href="https://matplotlib.org/users/usetex.html" target="_blank" rel="noopener">Text rendering With LaTeX</a>。</p>
<p>Windows 版本的 Protext 可以从 <a href="https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/windows/protext/" target="_blank" rel="noopener">清华大学开源软件镜像站</a>下载，但一定记住下载 <code>protext.exe</code> 这个文件，那个带版本号的文件有问题，安装不了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> rcParams</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rcParams[<span class="string">'font.size'</span>] = <span class="number">14</span></span><br><span class="line"><span class="comment"># 使用LaTeX编译，CJK宏包，utf-8编码格式，宋体gbsn，黑体hei，楷体gai</span></span><br><span class="line">rcParams[<span class="string">'text.usetex'</span>] = <span class="literal">True</span></span><br><span class="line">rcParams[<span class="string">'text.latex.unicode'</span>] = <span class="literal">True</span></span><br><span class="line">rcParams[<span class="string">'text.latex.preamble'</span>] = [</span><br><span class="line">    <span class="string">r'\usepackage&#123;CJK&#125;'</span>,</span><br><span class="line">    <span class="string">r'\AtBeginDocument&#123;\begin&#123;CJK&#125;&#123;UTF8&#125;&#123;song&#125;&#125;'</span>,</span><br><span class="line">    <span class="string">r'\usepackage&#123;mathptmx&#125;'</span>,</span><br><span class="line">    <span class="string">r'\AtEndDocument&#123;\end&#123;CJK&#125;&#125;'</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Import data</span></span><br><span class="line">excel_path = <span class="string">'data.xlsx'</span></span><br><span class="line">data = pd.read_excel(excel_path, sheet_name=<span class="string">'Sheet1'</span>)</span><br><span class="line">a = data.a.tolist()</span><br><span class="line">b = data.b.tolist()</span><br><span class="line">c = data.c.tolist()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot</span></span><br><span class="line"><span class="comment"># Colors from seaborn-paper</span></span><br><span class="line">colors = [<span class="string">'#4878CF'</span>, <span class="string">'#6ACC65'</span>, <span class="string">'#D65F5F'</span>, <span class="string">'#B47CC7'</span>, <span class="string">'#C4AD66'</span>, <span class="string">'#77BEDB'</span>]</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line"></span><br><span class="line">plt.scatter(a, b, label=<span class="string">r'\textrm&#123;MOEA/D&#125;'</span>)</span><br><span class="line">plt.scatter(a, c, label=<span class="string">r'\textrm&#123;NSGA-&#125;\uppercase\expandafter&#123;\romannumeral2&#125;'</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">r'\textrm&#123;hello world(kWh)&#125;'</span>)</span><br><span class="line">plt.ylabel(<span class="string">r'\textrm&#123;这是中文哈哈哈($m^3/s$)&#125;'</span>)</span><br><span class="line"></span><br><span class="line">legend = plt.legend(loc=<span class="string">'best'</span>, edgecolor=<span class="string">'inherit'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内侧刻度线</span></span><br><span class="line">plt.tick_params(direction=<span class="string">'in'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整整体空白</span></span><br><span class="line">fig.tight_layout()</span><br><span class="line">fig.subplots_adjust(bottom=<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">'latex.png'</span>, dpi=<span class="number">600</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<img src="http://pz1b8a7l9.bkt.clouddn.com/blog/images/matplotlib/latex.png">


<p>Perfect！</p>
<h2 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h2><ul>
<li><p><a href="https://matplotlib.org/" target="_blank" rel="noopener">Matplotlib: Python plotting  &mdash; Matplotlib 2.2.2 documentation</a></p>
</li>
<li><p><a href="http://www.seekiu.com/2016/mpl-for-publish.html" target="_blank" rel="noopener">用 matplotlib 画出规范的论文插图</a></p>
</li>
<li><p><a href="http://jonathansoma.com/lede/data-studio/matplotlib/changing-fonts-in-matplotlib/" target="_blank" rel="noopener">Changing fonts in matplotlib</a></p>
</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/Matplotlib/" rel="tag"># Matplotlib</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/03/Intellij-IDEA-keymap/" rel="next" title="IntelliJ IDEA Tips and Tricks">
                <i class="fa fa-chevron-left"></i> IntelliJ IDEA Tips and Tricks
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/07/08/ConcurrentHashMap/" rel="prev" title="ConcurrentHashMap">
                ConcurrentHashMap <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzAzNi85NTk4"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Muwednesday</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">16</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/muwednesday" title="GitHub &rarr; https://github.com/muwednesday" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="/muwednesday@163.com" title="E-Mail &rarr; muwednesday@163.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Matplotlib介绍"><span class="nav-number">1.</span> <span class="nav-text">Matplotlib介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单例子"><span class="nav-number">2.</span> <span class="nav-text">简单例子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复杂例子"><span class="nav-number">3.</span> <span class="nav-text">复杂例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#折线图"><span class="nav-number">3.1.</span> <span class="nav-text">折线图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#柱状图"><span class="nav-number">3.2.</span> <span class="nav-text">柱状图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#subplot"><span class="nav-number">4.</span> <span class="nav-text">subplot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#双坐标轴"><span class="nav-number">5.</span> <span class="nav-text">双坐标轴</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字体"><span class="nav-number">6.</span> <span class="nav-text">字体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#推荐阅读"><span class="nav-number">7.</span> <span class="nav-text">推荐阅读</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Muwednesday</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.2.0</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  


  
    


<script>
  window.livereOptions = {
    refer: '2018/05/07/matplotlib/'
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>

  


  




  

  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
